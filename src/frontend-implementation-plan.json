{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix Gift 2 photos rendering from HER_PHOTOS and ensure generated JPEG assets are served",
  "requirements": [
    {
      "id": "REQ-19",
      "summary": "Make Gift 2 (\"Beautiful You\") render exactly the three user-provided photos from HER_PHOTOS in the specified order, with no placeholder photo references used for Gift 2.",
      "acceptanceCriteria": [
        "Gift 2 renders exactly 3 images (no placeholders) and they correspond to the 3 filenames in HER_PHOTOS, in order.",
        "There are no other placeholder image filename references used for Gift 2 anywhere in the frontend code/config."
      ],
      "file_operations": [
        {
          "path": "frontend/src/config/valentineContent.ts",
          "operation": "modify",
          "description": "Verify HER_PHOTOS is exactly ['IMG_0131-1.jpeg','IMG_4617-1.jpeg','IMG_0156-1.jpeg'] in that order, and remove/avoid any Gift 2 placeholder filename usage in this config if present."
        },
        {
          "path": "frontend/src/screens/GiftsScreen.tsx",
          "operation": "modify",
          "description": "Ensure the Gift 2 gallery is driven only by HER_PHOTOS (no hardcoded/placeholder arrays) and renders exactly the three items in order; audit and remove any Gift 2 placeholder filename references if present. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-20",
      "summary": "Ensure the three JPEGs exist under frontend/public/assets/generated with exact filenames/case so they are served at /assets/generated/<filename> and do not trigger SafeGeneratedImage fallback.",
      "acceptanceCriteria": [
        "In the deployed app, directly opening each URL returns the image (not 404): /assets/generated/IMG_0131-1.jpeg, /assets/generated/IMG_4617-1.jpeg, /assets/generated/IMG_0156-1.jpeg.",
        "When opening Gift 2 in the app, none of the three images show the \"Image not found\" fallback state."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/IMG_0131-1.jpeg",
          "operation": "create",
          "description": "Add/ensure the static asset exists with this exact filename and casing so it is served as a public static file at /assets/generated/IMG_0131-1.jpeg."
        },
        {
          "path": "frontend/public/assets/generated/IMG_4617-1.jpeg",
          "operation": "create",
          "description": "Add/ensure the static asset exists with this exact filename and casing so it is served as a public static file at /assets/generated/IMG_4617-1.jpeg."
        },
        {
          "path": "frontend/public/assets/generated/IMG_0156-1.jpeg",
          "operation": "create",
          "description": "Add/ensure the static asset exists with this exact filename and casing so it is served as a public static file at /assets/generated/IMG_0156-1.jpeg."
        },
        {
          "path": "frontend/src/components/SafeGeneratedImage.tsx",
          "operation": "modify",
          "description": "Confirm the public-path mapping remains compatible with static hosting (expects /assets/generated/<filename>) and that Gift 2 loads the three JPEGs without triggering fallback; adjust only if needed to match the static asset location."
        }
      ]
    },
    {
      "id": "REQ-21",
      "summary": "Update frontend deployment/build guidance to rebuild and redeploy with the verified assets/config and include a post-deploy validation checklist for Gift 2 and direct asset URLs.",
      "acceptanceCriteria": [
        "After redeploy, Gift 2 shows the 3 user photos and no placeholder photos.",
        "A quick post-deploy check confirms the three /assets/generated/*.jpeg URLs load successfully in the browser."
      ],
      "file_operations": [
        {
          "path": "frontend/DEPLOYMENT_RETRY_RUNBOOK.md",
          "operation": "modify",
          "description": "Add a focused pre-deploy checklist (verify the three files exist under frontend/public/assets/generated with exact case) and a post-deploy validation checklist (open Gift 2 and directly load the three /assets/generated/*.jpeg URLs) to confirm latest static files are included."
        },
        {
          "path": "frontend/scripts/retry-deploy-and-capture-logs.sh",
          "operation": "modify",
          "description": "Add a lightweight pre-build verification step that checks the presence of IMG_0131-1.jpeg, IMG_4617-1.jpeg, and IMG_0156-1.jpeg under frontend/public/assets/generated before building/deploying, to reduce redeploy cycles when assets are missing."
        }
      ]
    }
  ]
}